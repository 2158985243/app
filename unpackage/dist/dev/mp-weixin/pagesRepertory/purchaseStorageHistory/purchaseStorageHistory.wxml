<view class="purchaseStorageHistory data-v-57dca216"><u-navbar vue-id="b88fbca0-1" back-icon-color="#ffffff" title="采购入库" background="{{background}}" title-color="#ffffff" class="data-v-57dca216" bind:__l="__l" vue-slots="{{['right']}}"><view slot="right" class="data-v-57dca216"><text data-event-opts="{{[['tap',[['delHistory',['$event']]]]]}}" class="right_icon data-v-57dca216" bindtap="__e">删除</text></view></u-navbar><view class="mains data-v-57dca216"><view class="box data-v-57dca216"><view class="form_item data-v-57dca216"><view class="left data-v-57dca216"><text class="data-v-57dca216">供应商</text><u-input vue-id="b88fbca0-2" placeholder="请选择供应商" disabled="{{true}}" type="text" value="{{supplier}}" data-event-opts="{{[['^click',[['toChooseSupplier']]],['^input',[['__set_model',['','supplier','$event',[]]]]]]}}" bind:click="__e" bind:input="__e" class="data-v-57dca216" bind:__l="__l"></u-input></view><u-icon vue-id="b88fbca0-3" name="arrow-right" color="#cccccc" size="28" class="data-v-57dca216" bind:__l="__l"></u-icon></view><view class="form_item data-v-57dca216"><view class="left data-v-57dca216"><text class="data-v-57dca216">店铺</text><u-input vue-id="b88fbca0-4" placeholder="请选择店铺" disabled="{{true}}" type="text" value="{{shop}}" data-event-opts="{{[['^click',[['toStore']]],['^input',[['__set_model',['','shop','$event',[]]]]]]}}" bind:click="__e" bind:input="__e" class="data-v-57dca216" bind:__l="__l"></u-input></view><u-icon vue-id="b88fbca0-5" name="arrow-right" color="#cccccc" size="28" class="data-v-57dca216" bind:__l="__l"></u-icon></view></view><view class="jump data-v-57dca216"><view class="scan data-v-57dca216">扫条码</view><view data-event-opts="{{[['tap',[['selectProducts',['$event']]]]]}}" class="select-goods data-v-57dca216" bindtap="__e">选商品</view></view><block wx:if="{{shopping.length>0}}"><view class="shopping-boxs data-v-57dca216"><block wx:for="{{$root.l0}}" wx:for-item="item" wx:for-index="index" wx:key="index"><view class="shopping-cart data-v-57dca216"><block wx:if="{{item.$orig.goodsData[0]}}"><view class="headers data-v-57dca216"><u-image vue-id="{{'b88fbca0-6-'+index}}" width="140rpx" height="140rpx" mode="aspectFit" border-radius="20" src="{{item.m0}}" class="data-v-57dca216" bind:__l="__l"></u-image><view data-event-opts="{{[['tap',[['showgd',['$0',index],[[['shopping','',index]]]]]]]}}" class="substance data-v-57dca216" bindtap="__e"><view class="goodsNews data-v-57dca216"><text class="goods-name data-v-57dca216">{{item.$orig.goodsData[0].goodsOf.name}}</text><text class="goods-number data-v-57dca216">{{item.$orig.goodsData[0].goodsOf.number}}</text><text class="goods-money data-v-57dca216">{{"¥"+item.$orig.goodsData[0].goodsOf.purchase_price}}</text></view></view><u-icon class="close data-v-57dca216" vue-id="{{'b88fbca0-7-'+index}}" name="trash" color="#a8a8a8" size="40" data-event-opts="{{[['^click',[['delgoods',[index]]]]]}}" bind:click="__e" bind:__l="__l"></u-icon></view></block><block wx:for="{{item.$orig.goodsData}}" wx:for-item="itemColor" wx:for-index="indexColor" wx:key="indexColor"><view class="data-v-57dca216"><block wx:if="{{itemColor.quantity>0}}"><view class="sp-color-size data-v-57dca216"><view class="shopp-color data-v-57dca216"><text class="color-name data-v-57dca216">{{itemColor.name}}</text><block wx:if="{{goodsMoney[index]}}"><text class="color-mn data-v-57dca216">{{"¥"+goodsMoney[index].moneys[indexColor]}}</text></block><u-icon vue-id="{{'b88fbca0-8-'+index+'-'+indexColor}}" name="edit-pen-fill" color="#a8a8a8" size="40" data-event-opts="{{[['^click',[['showAmend',[index,indexColor]]]]]}}" bind:click="__e" class="data-v-57dca216" bind:__l="__l"></u-icon><text class="color-quantity data-v-57dca216">{{"x"+itemColor.quantity}}</text></view><view class="sp-size-name-quantity data-v-57dca216"><block wx:for="{{itemColor.data}}" wx:for-item="itemSizeName" wx:for-index="indexSizeName" wx:key="indexSizeName"><view class="sp-size data-v-57dca216"><text class="sp-size-name data-v-57dca216">{{itemSizeName.size.name}}</text></view></block></view><view class="sp-size-name-quantity data-v-57dca216"><block wx:for="{{itemColor.data}}" wx:for-item="itemSizeQuantity" wx:for-index="indexSizeQuantity" wx:key="indexSizeQuantity"><view class="sp-size data-v-57dca216"><text class="sp-size-quantity data-v-57dca216">{{itemSizeQuantity.quantity}}</text></view></block></view></view></block></view></block></view></block></view></block><view class="box data-v-57dca216"><view class="form_item data-v-57dca216"><view class="left data-v-57dca216"><text class="data-v-57dca216">商品金额</text><text class="data-v-57dca216">{{goodsAmount}}</text></view></view><view class="other-expenses data-v-57dca216"><view class="green data-v-57dca216"><text class="data-v-57dca216">优惠金额</text></view><text data-event-opts="{{[['tap',[['tapDiscount',['$event']]]]]}}" class="green-money data-v-57dca216" bindtap="__e">{{"-"+form.discount_amount}}</text><view class="orgin data-v-57dca216"><text class="data-v-57dca216">其他费用</text></view><text data-event-opts="{{[['tap',[['tapOther',['$event']]]]]}}" class="orgin-money data-v-57dca216" bindtap="__e">{{"+"+form.other_expense}}</text></view></view><u-popup bind:input="__e" vue-id="b88fbca0-9" mode="center" border-radius="14" width="50%" height="280rpx" value="{{showGreen}}" data-event-opts="{{[['^input',[['__set_model',['','showGreen','$event',[]]]]]]}}" class="data-v-57dca216" bind:__l="__l" vue-slots="{{['default']}}"><view class="pop data-v-57dca216"><text class="data-v-57dca216">优惠金额</text><u-input bind:input="__e" vue-id="{{('b88fbca0-10')+','+('b88fbca0-9')}}" placeholder="请输入优惠金额" height="60" border="{{true}}" type="number" value="{{greenVal}}" data-event-opts="{{[['^input',[['__set_model',['','greenVal','$event',[]]]]]]}}" class="data-v-57dca216" bind:__l="__l"></u-input><view class="btn data-v-57dca216"><u-button class="btnChild data-v-57dca216" vue-id="{{('b88fbca0-11')+','+('b88fbca0-9')}}" hair-line="{{false}}" data-event-opts="{{[['^click',[['abrogate',[0]]]]]}}" bind:click="__e" bind:__l="__l" vue-slots="{{['default']}}">取消</u-button><u-button class="btnChild data-v-57dca216" vue-id="{{('b88fbca0-12')+','+('b88fbca0-9')}}" hair-line="{{false}}" data-event-opts="{{[['^click',[['ensure',[0]]]]]}}" bind:click="__e" bind:__l="__l" vue-slots="{{['default']}}">确定</u-button></view></view></u-popup><u-popup bind:input="__e" vue-id="b88fbca0-13" mode="center" border-radius="14" width="50%" height="280rpx" value="{{showOrgin}}" data-event-opts="{{[['^input',[['__set_model',['','showOrgin','$event',[]]]]]]}}" class="data-v-57dca216" bind:__l="__l" vue-slots="{{['default']}}"><view class="pop data-v-57dca216"><text class="data-v-57dca216">其他金额</text><u-input bind:input="__e" vue-id="{{('b88fbca0-14')+','+('b88fbca0-13')}}" placeholder="请输入其他金额" height="60" border="{{true}}" type="number" value="{{orginVal}}" data-event-opts="{{[['^input',[['__set_model',['','orginVal','$event',[]]]]]]}}" class="data-v-57dca216" bind:__l="__l"></u-input><view class="btn data-v-57dca216"><u-button class="btnChild data-v-57dca216" vue-id="{{('b88fbca0-15')+','+('b88fbca0-13')}}" hair-line="{{false}}" data-event-opts="{{[['^click',[['abrogate',[1]]]]]}}" bind:click="__e" bind:__l="__l" vue-slots="{{['default']}}">取消</u-button><u-button class="btnChild data-v-57dca216" vue-id="{{('b88fbca0-16')+','+('b88fbca0-13')}}" hair-line="{{false}}" data-event-opts="{{[['^click',[['ensure',[1]]]]]}}" bind:click="__e" bind:__l="__l" vue-slots="{{['default']}}">确定</u-button></view></view></u-popup><u-popup bind:input="__e" vue-id="b88fbca0-17" mode="center" border-radius="14" width="50%" height="280rpx" value="{{showMoney}}" data-event-opts="{{[['^input',[['__set_model',['','showMoney','$event',[]]]]]]}}" class="data-v-57dca216" bind:__l="__l" vue-slots="{{['default']}}"><view class="pop data-v-57dca216"><text class="data-v-57dca216">修改价格</text><u-input bind:input="__e" vue-id="{{('b88fbca0-18')+','+('b88fbca0-17')}}" placeholder="请输入修改价格" height="60" border="{{true}}" type="number" value="{{amendMoney}}" data-event-opts="{{[['^input',[['__set_model',['','amendMoney','$event',[]]]]]]}}" class="data-v-57dca216" bind:__l="__l"></u-input><view class="btn data-v-57dca216"><u-button class="btnChild data-v-57dca216" vue-id="{{('b88fbca0-19')+','+('b88fbca0-17')}}" hair-line="{{false}}" data-event-opts="{{[['^click',[['abrogated']]]]}}" bind:click="__e" bind:__l="__l" vue-slots="{{['default']}}">取消</u-button><u-button class="btnChild data-v-57dca216" vue-id="{{('b88fbca0-20')+','+('b88fbca0-17')}}" hair-line="{{false}}" data-event-opts="{{[['^click',[['ensured']]]]}}" bind:click="__e" bind:__l="__l" vue-slots="{{['default']}}">确定</u-button></view></view></u-popup><view class="box data-v-57dca216"><view class="form_item data-v-57dca216"><view class="left data-v-57dca216"><text class="data-v-57dca216">付款账户</text><u-input vue-id="b88fbca0-21" placeholder="请选择付款账户" disabled="{{true}}" type="text" value="{{account}}" data-event-opts="{{[['^click',[['toSelectAccount']]],['^input',[['__set_model',['','account','$event',[]]]]]]}}" bind:click="__e" bind:input="__e" class="data-v-57dca216" bind:__l="__l"></u-input></view><u-icon vue-id="b88fbca0-22" name="arrow-right" color="#cccccc" size="28" class="data-v-57dca216" bind:__l="__l"></u-icon></view><view class="form_item data-v-57dca216"><view class="left data-v-57dca216"><text class="data-v-57dca216">付款金额</text><u-input bind:input="__e" vue-id="b88fbca0-23" placeholder="请输入付款金额" type="text" value="{{form.pay_money}}" data-event-opts="{{[['^input',[['__set_model',['$0','pay_money','$event',[]],['form']]]]]}}" class="data-v-57dca216" bind:__l="__l"></u-input></view></view><view class="form_item data-v-57dca216"><view class="left data-v-57dca216"><text class="data-v-57dca216">欠供应商款</text><u-input bind:input="__e" vue-id="b88fbca0-24" disabled="{{true}}" type="text" value="{{arrears}}" data-event-opts="{{[['^input',[['__set_model',['','arrears','$event',[]]]]]]}}" class="data-v-57dca216" bind:__l="__l"></u-input></view></view></view><view class="box  data-v-57dca216"><view class="form_item data-v-57dca216"><view class="left data-v-57dca216"><text class="data-v-57dca216">业务时间</text><u-input vue-id="b88fbca0-25" placeholder="请选择时间" disabled="{{true}}" type="text" value="{{form.business_time}}" data-event-opts="{{[['^click',[['hiddenTime']]],['^input',[['__set_model',['$0','business_time','$event',[]],['form']]]]]}}" bind:click="__e" bind:input="__e" class="data-v-57dca216" bind:__l="__l"></u-input></view><u-icon vue-id="b88fbca0-26" name="arrow-right" color="#cccccc" size="28" class="data-v-57dca216" bind:__l="__l"></u-icon></view><u-picker vue-id="b88fbca0-27" mode="time" params="{{params}}" value="{{showtime}}" data-event-opts="{{[['^confirm',[['confirmTime']]],['^input',[['__set_model',['','showtime','$event',[]]]]]]}}" bind:confirm="__e" bind:input="__e" class="data-v-57dca216" bind:__l="__l"></u-picker><view class="form_item data-v-57dca216"><view class="left data-v-57dca216"><text class="data-v-57dca216">备注</text><u-input bind:input="__e" vue-id="b88fbca0-28" type="text" value="{{form.remarks}}" data-event-opts="{{[['^input',[['__set_model',['$0','remarks','$event',[]],['form']]]]]}}" class="data-v-57dca216" bind:__l="__l"></u-input></view></view></view><view class="foot data-v-57dca216"><view class="total data-v-57dca216">{{'合计：'+numberUnits+"件"}}<text class="orgin-money data-v-57dca216">{{'¥'+(goodsAmount-$root.m1+$root.m2)}}</text></view><view class="sub data-v-57dca216"><view data-event-opts="{{[['tap',[['save',[0]]]]]}}" class="btnon1 data-v-57dca216" bindtap="__e">草稿</view><view data-event-opts="{{[['tap',[['save',[1]]]]]}}" class="btnon2 data-v-57dca216" bindtap="__e">保存</view></view></view><u-popup bind:input="__e" vue-id="b88fbca0-29" mode="bottom" z-index="996" height="70%" value="{{showGoods}}" data-event-opts="{{[['^input',[['__set_model',['','showGoods','$event',[]]]]]]}}" class="data-v-57dca216" bind:__l="__l" vue-slots="{{['default']}}"><view class="specification data-v-57dca216"><block wx:if="{{goodsDetails[0]}}"><view class="goods-of data-v-57dca216"><u-image vue-id="{{('b88fbca0-30')+','+('b88fbca0-29')}}" width="140rpx" height="140rpx" border-radius="20" src="{{$root.m3}}" class="data-v-57dca216" bind:__l="__l"></u-image><view class="goodsNews data-v-57dca216"><text class="goods-name data-v-57dca216">{{goodsDetails[0].goodsOf.name}}</text><text class="goods-number data-v-57dca216">{{goodsDetails[0].goodsOf.number}}</text><text class="goods-money data-v-57dca216">{{"¥"+goodsDetails[0].goodsOf.purchase_price}}</text></view></view></block><u-line vue-id="{{('b88fbca0-31')+','+('b88fbca0-29')}}" color="#e6e6e6" class="data-v-57dca216" bind:__l="__l"></u-line><view class="goods-color data-v-57dca216"><text class="data-v-57dca216">颜色</text><view class="colors data-v-57dca216"><block wx:for="{{goodsDetails}}" wx:for-item="item" wx:for-index="index" wx:key="index"><view data-event-opts="{{[['tap',[['clickColor',['$0',index],[[['goodsDetails','',index]]]]]]]}}" class="{{['colorMo data-v-57dca216',active1==index?'active':'']}}" bindtap="__e"><text class="data-v-57dca216">{{item.name}}</text><block wx:if="{{item.quantity>0}}"><text class="pos data-v-57dca216">{{item.quantity}}</text></block></view></block></view></view><view class="goods-size data-v-57dca216"><block wx:for="{{goodsDetails}}" wx:for-item="item" wx:for-index="index" wx:key="index"><view class="data-v-57dca216"><block wx:if="{{index==active1}}"><view class="size-box data-v-57dca216"><view class="size-box-list once data-v-57dca216"><text class="listed data-v-57dca216">尺码</text><text class="listed data-v-57dca216">当前库存</text><u-number-box class="listed data-v-57dca216" vue-id="{{('b88fbca0-32-'+index)+','+('b88fbca0-29')}}" size="24" input-width="60" input-height="40" min="{{0}}" value="{{item.valNew}}" data-event-opts="{{[['^change',[['valChangeAll',['$event','$0',index],[[['goodsDetails','',index]]]]]],['^input',[['__set_model',['$0','valNew','$event',[]],[[['goodsDetails','',index]]]]]]]}}" bind:change="__e" bind:input="__e" bind:__l="__l"></u-number-box></view><block wx:for="{{item.data}}" wx:for-item="item1" wx:for-index="index1" wx:key="index1"><view class="size-box-list data-v-57dca216"><text class="listed data-v-57dca216">{{item1.size.name}}</text><block wx:if="{{item1.goods_spec_info}}"><text class="listed data-v-57dca216">{{item1.goods_spec_info.stock}}</text></block><u-number-box class="listed data-v-57dca216" vue-id="{{('b88fbca0-33-'+index+'-'+index1)+','+('b88fbca0-29')}}" size="24" input-width="60" input-height="40" min="{{0}}" value="{{item1.quantity}}" data-event-opts="{{[['^change',[['valChange',['$event',index,index1]]]],['^input',[['__set_model',['$0','quantity','$event',[]],[[['goodsDetails','',index],['data','',index1]]]]]]]}}" bind:change="__e" bind:input="__e" bind:__l="__l"></u-number-box></view></block></view></block></view></block></view><view class="btn data-v-57dca216"><u-button class="btn data-v-57dca216" vue-id="{{('b88fbca0-34')+','+('b88fbca0-29')}}" type="primary" data-event-opts="{{[['^click',[['sure']]]]}}" bind:click="__e" bind:__l="__l" vue-slots="{{['default']}}">确定</u-button></view></view></u-popup><u-toast vue-id="b88fbca0-35" data-ref="uToast" class="data-v-57dca216 vue-ref" bind:__l="__l"></u-toast></view></view>
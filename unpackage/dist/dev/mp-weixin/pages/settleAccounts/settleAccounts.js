(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/settleAccounts/settleAccounts"],{883:
/*!**************************************************************************************************************!*\
  !*** C:/Users/admin/Desktop/clothingAPP/clothing/main.js?{"page":"pages%2FsettleAccounts%2FsettleAccounts"} ***!
  \**************************************************************************************************************/
/*! no static exports found */function(e,t,o){"use strict";(function(e){o(/*! uni-pages */4);n(o(/*! vue */2));var t=n(o(/*! ./pages/settleAccounts/settleAccounts.vue */884));function n(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,o(/*! ./node_modules/@dcloudio/uni-mp-weixin/dist/index.js */1)["createPage"])},884:
/*!*******************************************************************************************!*\
  !*** C:/Users/admin/Desktop/clothingAPP/clothing/pages/settleAccounts/settleAccounts.vue ***!
  \*******************************************************************************************/
/*! no static exports found */function(e,t,o){"use strict";o.r(t);var n=o(/*! ./settleAccounts.vue?vue&type=template&id=2bf2b4a6&scoped=true& */885),s=o(/*! ./settleAccounts.vue?vue&type=script&lang=js& */887);for(var i in s)"default"!==i&&function(e){o.d(t,e,(function(){return s[e]}))}(i);o(/*! ./settleAccounts.vue?vue&type=style&index=0&id=2bf2b4a6&scoped=true&lang=scss& */891);var r,a=o(/*! ../../../../../Downloads/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js */10),u=Object(a["default"])(s["default"],n["render"],n["staticRenderFns"],!1,null,"2bf2b4a6",null,!1,n["components"],r);u.options.__file="pages/settleAccounts/settleAccounts.vue",t["default"]=u.exports},885:
/*!**************************************************************************************************************************************!*\
  !*** C:/Users/admin/Desktop/clothingAPP/clothing/pages/settleAccounts/settleAccounts.vue?vue&type=template&id=2bf2b4a6&scoped=true& ***!
  \**************************************************************************************************************************************/
/*! exports provided: render, staticRenderFns, recyclableRender, components */function(e,t,o){"use strict";o.r(t);var n=o(/*! -!../../../../../Downloads/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../Downloads/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--16-0!../../../../../Downloads/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../Downloads/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../Downloads/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!../../../../../Downloads/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./settleAccounts.vue?vue&type=template&id=2bf2b4a6&scoped=true& */886);o.d(t,"render",(function(){return n["render"]})),o.d(t,"staticRenderFns",(function(){return n["staticRenderFns"]})),o.d(t,"recyclableRender",(function(){return n["recyclableRender"]})),o.d(t,"components",(function(){return n["components"]}))},886:
/*!**************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--16-0!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!C:/Users/admin/Desktop/clothingAPP/clothing/pages/settleAccounts/settleAccounts.vue?vue&type=template&id=2bf2b4a6&scoped=true& ***!
  \**************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/*! exports provided: render, staticRenderFns, recyclableRender, components */function(e,t,o){"use strict";var n;o.r(t),o.d(t,"render",(function(){return s})),o.d(t,"staticRenderFns",(function(){return r})),o.d(t,"recyclableRender",(function(){return i})),o.d(t,"components",(function(){return n}));try{n={uIcon:function(){return o.e(/*! import() | node-modules/uview-ui/components/u-icon/u-icon */"node-modules/uview-ui/components/u-icon/u-icon").then(o.bind(null,/*! uview-ui/components/u-icon/u-icon.vue */1590))},uImage:function(){return o.e(/*! import() | node-modules/uview-ui/components/u-image/u-image */"node-modules/uview-ui/components/u-image/u-image").then(o.bind(null,/*! uview-ui/components/u-image/u-image.vue */1664))},uInput:function(){return Promise.all(/*! import() | node-modules/uview-ui/components/u-input/u-input */[o.e("common/vendor"),o.e("node-modules/uview-ui/components/u-input/u-input")]).then(o.bind(null,/*! uview-ui/components/u-input/u-input.vue */1562))},uPicker:function(){return Promise.all(/*! import() | node-modules/uview-ui/components/u-picker/u-picker */[o.e("common/vendor"),o.e("node-modules/uview-ui/components/u-picker/u-picker")]).then(o.bind(null,/*! uview-ui/components/u-picker/u-picker.vue */1647))},uCheckboxGroup:function(){return Promise.all(/*! import() | node-modules/uview-ui/components/u-checkbox-group/u-checkbox-group */[o.e("common/vendor"),o.e("node-modules/uview-ui/components/u-checkbox-group/u-checkbox-group")]).then(o.bind(null,/*! uview-ui/components/u-checkbox-group/u-checkbox-group.vue */1576))},uCheckbox:function(){return o.e(/*! import() | node-modules/uview-ui/components/u-checkbox/u-checkbox */"node-modules/uview-ui/components/u-checkbox/u-checkbox").then(o.bind(null,/*! uview-ui/components/u-checkbox/u-checkbox.vue */1583))},uPopup:function(){return o.e(/*! import() | node-modules/uview-ui/components/u-popup/u-popup */"node-modules/uview-ui/components/u-popup/u-popup").then(o.bind(null,/*! uview-ui/components/u-popup/u-popup.vue */1604))},uToast:function(){return o.e(/*! import() | node-modules/uview-ui/components/u-toast/u-toast */"node-modules/uview-ui/components/u-toast/u-toast").then(o.bind(null,/*! uview-ui/components/u-toast/u-toast.vue */1597))}}}catch(a){if(-1===a.message.indexOf("Cannot find module")||-1===a.message.indexOf(".vue"))throw a;console.error(a.message),console.error("1. 排查组件名称拼写是否正确"),console.error("2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom"),console.error("3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件")}var s=function(){var e=this,t=e.$createElement,o=(e._self._c,e.members.name?e.$imgFn(e.members.image):null),n=e.__map(e.list,(function(t,o){var n=e.__get_orig(t),s=e.__map(t.data,(function(o,n){var s=e.__get_orig(o),i=o.quantity>0?e.$imgFn(t.goodsOf.main_image):null,r=o.quantity>0&&(1!=o.discount||1!=e.discount)&&1!=o.discount?(10*o.discount).toFixed(2):null;return{$orig:s,m1:i,g0:r}}));return{$orig:n,l0:s}})),s=e.sum_money.toFixed(2),i=e.discounts?(10*Number(e.discounts)).toFixed(2):null,r=e.__map(e.discount_list,(function(t,o){var n=e.__get_orig(t),s=(10*Number(t.discount)).toFixed(2);return{$orig:n,g3:s}}));e._isMounted||(e.e0=function(t){e.show=!e.show},e.e1=function(t){e.show_edit=!1},e.e2=function(t){e.user_point=!1}),e.$mp.data=Object.assign({},{$root:{m0:o,l1:n,g1:s,g2:i,l2:r}})},i=!1,r=[];s._withStripped=!0},887:
/*!********************************************************************************************************************!*\
  !*** C:/Users/admin/Desktop/clothingAPP/clothing/pages/settleAccounts/settleAccounts.vue?vue&type=script&lang=js& ***!
  \********************************************************************************************************************/
/*! no static exports found */function(e,t,o){"use strict";o.r(t);var n=o(/*! -!../../../../../Downloads/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib!../../../../../Downloads/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--12-1!../../../../../Downloads/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../Downloads/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!../../../../../Downloads/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./settleAccounts.vue?vue&type=script&lang=js& */888),s=o.n(n);for(var i in n)"default"!==i&&function(e){o.d(t,e,(function(){return n[e]}))}(i);t["default"]=s.a},888:
/*!***************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/babel-loader/lib!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--12-1!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!C:/Users/admin/Desktop/clothingAPP/clothing/pages/settleAccounts/settleAccounts.vue?vue&type=script&lang=js& ***!
  \***************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/*! no static exports found */function(e,t,o){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=c(o(/*! ./node_modules/@babel/runtime/regenerator */38)),s=o(/*! ../../api/member.js */113),i=c(o(/*! @/store */48)),r=o(/*! ../../api/account.js */214),a=o(/*! ../../api/salesOrder.js */69),u=o(/*! ../../api/point.js */889),m=o(/*! ../../api/discount.js */890);function c(e){return e&&e.__esModule?e:{default:e}}function d(e,t,o,n,s,i,r){try{var a=e[i](r),u=a.value}catch(m){return void o(m)}a.done?t(u):Promise.resolve(u).then(n,s)}function l(e){return function(){var t=this,o=arguments;return new Promise((function(n,s){var i=e.apply(t,o);function r(e){d(i,n,s,r,a,"next",e)}function a(e){d(i,n,s,r,a,"throw",e)}r(void 0)}))}}var f={data:function(){return{point_used_as_money:"",used_point:"",user_point:!1,checked:!1,rebate:0,list:[],sum_number:0,sum_money:0,message_list:{sales_can_choose_date:{},sales_staff_required:{}},form:{customer_id:0,discount_money:"",staff_id:0,money:0,reward_point:0,pay_type:0,point_used_as_money:0,used_point:0,payment:[],status:0,erasure_money:0,goods:[],remarks:""},group:[{name:"打印小票",checked:!1},{name:"短信通知",checked:!1}],show:!1,showed:!1,showtime:!1,showPayment:!1,params:{year:!0,month:!0,day:!0,hour:!1,minute:!1,second:!1},staff:"",discounts:"",unit:1,integral:1,placeholder:"",test:"",discount:0,discount_list:[],value:"",active:9999,set_del:!1,paymentList:[],activePay:9999,payItem:{},show_edit:!1,money_edit:"",show_psd:!1,password:"",members_data:{name:""}}},onBackPress:function(e){return"navigateBack"!==e.from&&(this.quit(),!0)},computed:{members:function(){var e={};return""!=i.default.state.customerObj.name?(e=i.default.state.customerObj,this.members_data=e,this.discount=Number(e.customer_level.discount),this.$forceUpdate()):e=this.members_data,e},goods:function(){return i.default.state.specificationOfGoods},toMoney:function(){var e=0;return this.discounts?(e=(Number(this.sum_money)*Number(this.discounts)).toFixed(2),this.form.discount_money=(Number(this.sum_money)-e).toFixed(2)):e=Number(this.sum_money)-Number(this.form.discount_money),e.toFixed(2)}},methods:{quit:function(){this.$store.commit("customerFn",{customerObj:this.members_data}),e.navigateBack()},inputChange:function(){this.used_point>this.members.point?(this.used_point=this.members.point,this.point_used_as_money=(this.used_point/this.message_list.point_exchange_money.value).toFixed(2),this.$refs.uToast.show({title:"最多可以兑换".concat(this.members.point,"抵现").concat(this.point_used_as_money,"元"),type:"default",position:"bottom"})):this.point_used_as_money=(this.used_point/this.message_list.point_exchange_money.value).toFixed(2)},enpoint:function(){this.user_point=!1,this.checked&&(this.form.used_point=this.$u.deepClone(this.used_point),this.form.point_used_as_money=this.$u.deepClone(this.point_used_as_money),this.form.money=(this.form.money-Number(this.form.point_used_as_money)).toFixed(2),this.used_point="",this.point_used_as_money="")},checkboxChange:function(e){console.log(e),e.value&&(this.user_point=!0),this.form.money=Number(this.form.money)+Number(this.form.point_used_as_money),this.form.used_point=0,this.form.point_used_as_money=0},inputValue:function(e){this.form.discount_money=e;var t=this.$u.deepClone(Number(this.sum_money)-Number(this.form.discount_money));1==this.message_list.sales_not_count_small_change.value?(this.form.money=Math.floor(t),this.form.erasure_money=t-Math.floor(t)):2==this.message_list.sales_not_count_small_change.value?(this.form.money=Math.floor(10*t)/10,this.form.erasure_money=t-Math.floor(10*t)/10):3==this.message_list.sales_not_count_small_change.value?(this.form.money=Math.round(t),this.form.erasure_money=t-Math.round(t)):4==this.message_list.sales_not_count_small_change.value?(this.form.money=Math.round(10*t)/10,this.form.erasure_money=t-Math.round(10*t)/10):this.form.money=t,this.form.erasure_money=this.form.erasure_money.toFixed(2),this.form.customer_id>0&&(this.form.reward_point=Math.floor(this.integral/Number(this.unit)*this.toMoney)),this.$forceUpdate()},init:function(){var e=this;this.list=[],this.sum_number=0,this.sum_money=0,this.goods.map((function(t,o){t.goodsData.map((function(t,o){t.data.map((function(e,o){e["retail_price"]=Number(t.goodsOf.retail_price),0==t.goodsOf.customer_price?e["customer_price"]=Number(t.goodsOf.retail_price):e["customer_price"]=Number(t.goodsOf.customer_price)})),t.quantity>0&&e.list.push(t)}))})),this.list.map((function(t,o){e.sum_number+=Number(t.quantity),t.data.map((function(t,o){t.quantity>0&&(t.discount||(0!=e.discount?t["discount"]=e.discount:t["discount"]=1),t["retail_price"]=(Number(t.retail_price)*Number(t.discount)).toFixed(2),e.sum_money+=Number(t.quantity)*Number(t.retail_price))}))})),this.form.money=this.toMoney},hiddenTime:function(){this.showtime=!0},confirmTime:function(e){this.form.business_time="".concat(e.year,"-").concat(e.month,"-").concat(e.day)},toSelecSalesperson:function(){e.navigateTo({url:"/pages/selecSalesperson/selecSalesperson"})},toMemberSelect:function(){e.navigateTo({url:"/pages/memberSelect/memberSelect"})},toResale:function(){var t=this;this.list.map((function(e,o){e.data.map((function(o,n){t.goods.map((function(t,n){t.goodsData.map((function(t,n){t.data.map((function(n,s){t.quantity>0&&e.goods_id==t.goods_id&&o.size.id==n.size.id&&(t.quantity=e.quantity,n.quantity=o.quantity)}))}))}))}))})),this.$store.commit("commercialSpecification",{specificationOfGoods:this.goods}),e.navigateTo({url:"/pages/resaleCashier/resaleCashier?account=true"})},toIntegralList:function(){e.navigateTo({url:"/pages/IntegralList/IntegralList"})},sure:function(t){var o=this;return l(n.default.mark((function s(){var i,r,u;return n.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(1!=o.message_list.sales_staff_required.value||0!=o.form.staff_id){n.next=4;break}o.$refs.uToast.show({title:"请选择销售员",type:"default",position:"bottom"}),n.next=31;break;case 4:if(!(o.list.length>0)){n.next=30;break}if(i=[],r=!1,o.list.map((function(e){e.data.map((function(t){0!=t.quantity&&(i.push({goods_id:e.goods_id,color_id:e.id,size_id:t.size.id,price:e.goodsOf.retail_price,quantity:t.quantity,discount:Number(t.discount),real_price:t.retail_price}),t.goods_spec_info.stock<0&&0==o.message_list.minus_stock_can_sales.value&&(r=!0))}))})),r){n.next=27;break}if(""==o.form.discount_money&&(o.form.discount_money=0),o.form.goods=i,t){n.next=21;break}return o.form.status=0,delete o.form.payment,n.next=16,(0,a.salesOrderAdd)(o.form);case 16:u=n.sent,o.$store.commit("commercialSpecification",{specificationOfGoods:[]}),u.code||e.navigateTo({url:"/pages/resaleCashier/resaleCashier"}),n.next=25;break;case 21:o.form.status=1,o.activePay=9999,o.showPayment=!0,o.payItem={};case 25:n.next=28;break;case 27:o.$refs.uToast.show({title:"库存不足不允许出货！",type:"default",position:"bottom"});case 28:n.next=31;break;case 30:o.$refs.uToast.show({title:"请选择商品",type:"default",position:"bottom"});case 31:case"end":return n.stop()}}),s)})))()},clear:function(){var e=this;this.sum_money=0,this.members_data={name:""},this.$store.commit("customerFn",{customerObj:this.members_data}),this.form.money=Number(this.form.money)+Number(this.form.point_used_as_money),this.form.customer_id=0,this.form.reward_point=0,this.checked=!1,this.list.map((function(t){t.data.map((function(o){o.quantity>0&&(o.discount=1,o.retail_price=t.goodsOf.retail_price,e.sum_money+=Number(o.quantity)*Number(o.retail_price))}))})),this.paymentList.map((function(e){"欠款"!=e.name&&"余额支付"!=e.name||(e.checked=!1)})),this.discount=0,this.form.money=(this.sum_money-this.form.discount_money).toFixed(2)},discountFn:function(){var e=this;return l(n.default.mark((function t(){var o;return n.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,(0,m.discountList)();case 2:o=t.sent,e.discount_list=[],o.map((function(t,o){e.discount_list.push(t),e.$set(e.discount_list,o,e.discount_list[o])}));case 5:case"end":return t.stop()}}),t)})))()},addDiscount:function(){this.showed=!0},ensure:function(){var e=this;return l(n.default.mark((function t(){var o;return n.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:o=(0,m.discountAdd)({discount:e.value}),o.code?e.$refs.uToast.show({title:o.msg,type:"default",position:"center"}):setTimeout((function(){e.discountFn(),e.showed=!1}),500),e.value="";case 3:case"end":return t.stop()}}),t)})))()},abrogate:function(){this.value="",this.showed=!1},edt:function(){this.active=9999,this.rebate="",this.set_del=!this.set_del},abolish:function(){this.show=!1,this.active=9999,this.rebate="",this.set_del=!1},itemClick:function(e,t){this.set_del||(this.active=t,this.rebate=e.discount)},notarize:function(e){this.rebate?(this.discounts=this.rebate,this.form.money=this.toMoney,0==this.message_list.sales_not_count_small_change.value||(1==this.message_list.sales_not_count_small_change.value?(this.form.money=Math.floor(this.form.money),this.form.erasure_money=this.toMoney-this.form.money):2==this.message_list.sales_not_count_small_change.value?(this.form.money=Math.floor(10*this.form.money)/10,this.form.erasure_money=this.toMoney-this.form.money):3==this.message_list.sales_not_count_small_change.value?(this.form.money=Math.round(this.form.money),this.form.erasure_money=this.toMoney-this.form.money):4==this.message_list.sales_not_count_small_change.value&&(this.form.money=Math.round(10*this.form.money)/10,this.form.erasure_money=this.toMoney-this.form.money)),this.form.erasure_money=this.form.erasure_money.toFixed(2),this.form.customer_id>0&&(this.form.reward_point=Math.floor(this.integral/Number(this.unit)*this.toMoney)),this.rebate="",this.show=!1):this.set_del?this.$refs.uToast.show({title:"请完成编辑",type:"default",position:"center"}):this.$refs.uToast.show({title:"请选择折扣",type:"default",position:"center"})},discountedDel:function(t){var o=this;e.showModal({title:"折扣编辑",content:"是否删除此折扣？",success:function(){var e=l(n.default.mark((function e(s){var i;return n.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!s.confirm){e.next=7;break}return e.next=3,(0,m.discountDel)(t.id);case 3:i=e.sent,i.code||setTimeout((function(){o.discountFn()}),500),e.next=8;break;case 7:s.cancel&&console.log("用户点击取消");case 8:case"end":return e.stop()}}),e)})));function s(t){return e.apply(this,arguments)}return s}()})},open:function(){this.active=9999,this.rebate="",this.set_del=!1},pointGetDe:function(){var e=this;return l(n.default.mark((function t(){var o;return n.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,(0,u.pointGetDefault)();case 2:o=t.sent,e.unit=o.money,e.integral=o.point,e.placeholder=o.money+"元="+o.point+"积分",e.form.customer_id>0&&(e.form.reward_point=Math.floor(e.integral/Number(e.unit)*e.toMoney));case 7:case"end":return t.stop()}}),t)})))()},togoodsOf:function(t,o,n){var s={item:t,index:o,indexGoods:n};e.navigateTo({url:"/pages/editItems/editItems?obj="+encodeURIComponent(JSON.stringify(s))})},accountd:function(){var e=this;return l(n.default.mark((function t(){var o;return n.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,(0,r.accountList)();case 2:o=t.sent,o.unshift({account_id:0,name:"余额支付"}),o.map((function(e){e["checked"]=!0,"欠款"!=e.name&&"余额支付"!=e.name||(e["checked"]=!1)})),e.paymentList=o;case 6:case"end":return t.stop()}}),t)})))()},paymentItem:function(e,t){this.activePay=t,this.payItem=e},paySure:function(){var t=this;return l(n.default.mark((function o(){var s;return n.default.wrap((function(o){while(1)switch(o.prev=o.next){case 0:if(t.form.payment=[],t.form.payment.push({account_id:t.payItem.account_id,money:t.form.money}),void 0!=t.payItem.account_id){o.next=6;break}t.$refs.uToast.show({title:"请选择支付方式",type:"default",position:"bottom"}),o.next=14;break;case 6:if(0!=t.payItem.account_id||1!=t.members.has_password){o.next=10;break}t.show_psd=!0,o.next=14;break;case 10:return o.next=12,(0,a.salesOrderAdd)(t.form);case 12:s=o.sent,s.code||(t.showPayment=!1,e.redirectTo({url:"/pages/paymentSuccess/paymentSuccess?payItem=".concat(t.payItem.name,"&money=").concat(t.form.money)}));case 14:case"end":return o.stop()}}),o)})))()},combination:function(){var t={form:this.form,paymentList:this.paymentList,has_password:this.members.has_password};e.navigateTo({url:"/pages/combination/combination?obj="+encodeURIComponent(JSON.stringify(t))})},showEditMoney:function(){this.money_edit="",this.show_edit=!0},ensureEdit:function(){""!=this.money_edit?(this.form.money=this.money_edit,this.form.customer_id>0&&(this.form.reward_point=Math.floor(this.integral/Number(this.unit)*this.toMoney)),this.form.discount_money=(this.sum_money-this.form.money).toFixed(2),this.show_edit=!1):this.$refs.uToast.show({title:"请输入修改金额",type:"default",position:"bottom"})},abrogated:function(){this.password="",this.show_psd=!1},ensured:function(){var t=this;return l(n.default.mark((function o(){var s;return n.default.wrap((function(o){while(1)switch(o.prev=o.next){case 0:return t.form.password=t.password,o.next=3,(0,a.salesOrderAdd)(t.form);case 3:s=o.sent,s.code||(t.show_psd=!1,t.showPayment=!1,e.navigateTo({url:"/pages/paymentSuccess/paymentSuccess?payItem=".concat(t.payItem.name,"&money=").concat(t.form.money)}));case 5:case"end":return o.stop()}}),o)})))()},config:function(){var e=this;return l(n.default.mark((function t(){var o,i;return n.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,(0,s.configList)();case 2:o=t.sent,o.code||(e.message_list=o,1==e.message_list.sales_can_choose_date.value&&(i=new Date,e.form.business_time=e.$u.timeFormat(i,"yyyy-mm-dd"),1==e.message_list.sales_not_count_small_change.value?(e.form.money=Math.floor(e.form.money),e.form.erasure_money=e.toMoney-e.form.money):2==e.message_list.sales_not_count_small_change.value?(e.form.money=Math.floor(10*e.form.money)/10,e.form.erasure_money=e.toMoney-e.form.money):3==e.message_list.sales_not_count_small_change.value?(e.form.money=Math.round(e.form.money),e.form.erasure_money=e.toMoney-e.form.money):4==e.message_list.sales_not_count_small_change.value&&(e.form.money=Math.round(10*e.form.money)/10,e.form.erasure_money=e.toMoney-e.form.money),e.form.erasure_money=e.form.erasure_money.toFixed(2)));case 4:case"end":return t.stop()}}),t)})))()}},onUnload:function(){e.$off()},onLoad:function(t){var o=this;this.pointGetDe(),this.accountd(),this.config(),this.init(),e.$on("selecSalesperson",(function(e){e&&(o.staff=e.name,o.form.staff_id=e.id)})),e.$on("memberSelect",(function(e){e&&(o.sum_money=0,o.members_data=e,o.form.customer_id=e.id,o.discount=Number(e.customer_level.discount),o.list.map((function(t){t.data.map((function(n){n["discount"]=e.customer_level.discount,1==o.discount?(0==n.customer_price?(n.customer_price=Number(t.goodsOf.retail_price),n.discount=(Number(t.goodsOf.retail_price)/Number(t.goodsOf.retail_price)).toFixed(2),n.retail_price=Number(t.goodsOf.retail_price).toFixed(2)):n.discount=(Number(n.customer_price)/Number(t.goodsOf.retail_price)).toFixed(2),n.retail_price=Number(n.customer_price).toFixed(2),o.sum_money+=Number(n.quantity)*Number(n.customer_price)):(n.retail_price=(Number(t.goodsOf.retail_price)*Number(n.discount)).toFixed(2),o.sum_money+=Number(n.quantity)*Number(n.retail_price))}))})),o.paymentList.map((function(e){"欠款"!=e.name&&"余额支付"!=e.name||(e.checked=!0)})),o.form.money=o.toMoney,1==o.message_list.sales_not_count_small_change.value?(o.form.money=Math.floor(o.form.money),o.form.erasure_money=o.toMoney-o.form.money):2==o.message_list.sales_not_count_small_change.value?(o.form.money=Math.floor(10*o.form.money)/10,o.form.erasure_money=o.toMoney-o.form.money):3==o.message_list.sales_not_count_small_change.value?(o.form.money=Math.round(o.form.money),o.form.erasure_money=o.toMoney-o.form.money):4==o.message_list.sales_not_count_small_change.value&&(o.form.money=Math.round(10*o.form.money)/10,o.form.erasure_money=o.toMoney-o.form.money),o.form.erasure_money=o.form.erasure_money.toFixed(2),o.form.reward_point=Math.floor(o.integral/Number(o.unit)*o.toMoney))})),e.$on("IntegralList",(function(e){e&&(o.unit=e.money,o.integral=e.point,o.placeholder=e.money+"元="+e.point+"积分",o.form.customer_id>0&&(o.form.reward_point=Math.floor(o.integral/Number(o.unit)*o.toMoney)))})),e.$on("editItems",(function(e){e&&(o.list[e.index].data[e.indexGoods].quantity=0,o.list[e.index].data[e.index_later].quantity=e.item.quantity,o.list[e.index].data[e.index_later].discount=e.item.discount,o.list[e.index].data[e.index_later].retail_price=e.item.retail_price,o.list[e.index].quantity=0,o.list[e.index].data.map((function(t){o.list[e.index].quantity+=t.quantity})),o.sum_number=0,o.sum_money=0,o.list.map((function(e,t){o.sum_number+=Number(e.quantity),e.data.map((function(t,n){t.quantity>0&&(t.discount||(t["discount"]=1),1==t.discount&&1==o.discount?0==t.customer_price?o.sum_money+=Number(t.quantity)*Number(e.goodsOf.retail_price):o.sum_money+=Number(t.quantity)*Number(t.customer_price):o.sum_money+=Number(t.quantity)*Number(t.retail_price))}))})),o.form.money=o.toMoney,1==o.message_list.sales_not_count_small_change.value?(o.form.money=Math.floor(o.form.money),o.form.erasure_money=(o.toMoney-o.form.money).toFixed(2)):2==o.message_list.sales_not_count_small_change.value?(o.form.money=Math.floor(10*o.form.money)/10,o.form.erasure_money=(o.toMoney-o.form.money).toFixed(2)):3==o.message_list.sales_not_count_small_change.value?(o.form.money=Math.round(o.form.money),o.form.erasure_money=(o.toMoney-o.form.money).toFixed(2)):4==o.message_list.sales_not_count_small_change.value&&(o.form.money=Math.round(10*o.form.money)/10,o.form.erasure_money=(o.toMoney-o.form.money).toFixed(2)))})),e.$on("editGood",(function(e){e&&o.init()}))},onShow:function(){this.discountFn()}};t.default=f}).call(this,o(/*! ./node_modules/@dcloudio/uni-mp-weixin/dist/index.js */1)["default"])},891:
/*!*****************************************************************************************************************************************************!*\
  !*** C:/Users/admin/Desktop/clothingAPP/clothing/pages/settleAccounts/settleAccounts.vue?vue&type=style&index=0&id=2bf2b4a6&scoped=true&lang=scss& ***!
  \*****************************************************************************************************************************************************/
/*! no static exports found */function(e,t,o){"use strict";o.r(t);var n=o(/*! -!../../../../../Downloads/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../Downloads/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../Downloads/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../Downloads/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--8-oneOf-1-2!../../../../../Downloads/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src??ref--8-oneOf-1-3!../../../../../Downloads/HBuilderX/plugins/uniapp-cli/node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../Downloads/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--8-oneOf-1-5!../../../../../Downloads/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!../../../../../Downloads/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./settleAccounts.vue?vue&type=style&index=0&id=2bf2b4a6&scoped=true&lang=scss& */892),s=o.n(n);for(var i in n)"default"!==i&&function(e){o.d(t,e,(function(){return n[e]}))}(i);t["default"]=s.a},892:
/*!*******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!./node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--8-oneOf-1-2!./node_modules/postcss-loader/src??ref--8-oneOf-1-3!./node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--8-oneOf-1-5!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!C:/Users/admin/Desktop/clothingAPP/clothing/pages/settleAccounts/settleAccounts.vue?vue&type=style&index=0&id=2bf2b4a6&scoped=true&lang=scss& ***!
  \*******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/*! no static exports found */function(e,t,o){}},[[883,"common/runtime","common/vendor"]]]);
//# sourceMappingURL=../../../.sourcemap/mp-weixin/pages/settleAccounts/settleAccounts.js.map
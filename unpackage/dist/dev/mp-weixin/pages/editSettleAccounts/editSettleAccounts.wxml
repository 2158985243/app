<view class="editSettleAccounts data-v-03b2db34"><u-navbar vue-id="72a78940-1" back-icon-color="#ffffff" title="结账" background="{{background}}" title-color="#ffffff" class="data-v-03b2db34" bind:__l="__l" vue-slots="{{['right']}}"><view slot="right" class="data-v-03b2db34"><view data-event-opts="{{[['tap',[['delIteme',['$event']]]]]}}" class="right_icon data-v-03b2db34" bindtap="__e">删除</view></view></u-navbar><view class="member-select data-v-03b2db34"><block wx:if="{{!members.name}}"><view data-event-opts="{{[['tap',[['toMemberSelect',['$event']]]]]}}" class="member data-v-03b2db34" bindtap="__e"><text class="data-v-03b2db34">会员选择</text><u-icon vue-id="72a78940-2" name="arrow-down-fill" color="#ffffff" size="24" class="data-v-03b2db34" bind:__l="__l"></u-icon></view></block><block wx:else><view class="membered data-v-03b2db34"><view class="left data-v-03b2db34"><u-image class="header_image data-v-03b2db34" vue-id="72a78940-3" width="70rpx" mode="aspectFit" border-radius="10" height="70rpx" src="{{$root.m0}}" bind:__l="__l"></u-image><text class="data-v-03b2db34">{{members.name}}</text><u-icon vue-id="72a78940-4" name="close-circle-fill" color="#ffffff" size="30" data-event-opts="{{[['^click',[['clear']]]]}}" bind:click="__e" class="data-v-03b2db34" bind:__l="__l"></u-icon></view><view class="right data-v-03b2db34"><text class="data-v-03b2db34">{{"余额："+members.balance}}</text></view></view></block></view><view class="mains data-v-03b2db34"><view class="goods-data data-v-03b2db34"><block wx:for="{{$root.l1}}" wx:for-item="item" wx:for-index="index" wx:key="index"><view class="list data-v-03b2db34"><block wx:for="{{item.l0}}" wx:for-item="itemGoods" wx:for-index="indexGoods" wx:key="indexGoods"><view class="goods-list data-v-03b2db34"><block wx:if="{{itemGoods.$orig.quantity>0}}"><view data-event-opts="{{[['tap',[['togoodsOf',['$0',index,indexGoods],[[['list','',index]]]]]]]}}" class="dole data-v-03b2db34" bindtap="__e"><view class="goods-left data-v-03b2db34"><u-image class="header_image data-v-03b2db34" vue-id="{{'72a78940-5-'+index+'-'+indexGoods}}" width="100rpx" mode="aspectFit" border-radius="10" height="100rpx" src="{{itemGoods.m1}}" bind:__l="__l"></u-image><view class="item-left data-v-03b2db34"><text class="hei data-v-03b2db34">{{item.$orig.goodsOf.name+''}}<text class="hui data-v-03b2db34">{{item.$orig.goodsOf.number}}</text></text><text class="zc data-v-03b2db34">{{item.$orig.name+"-"+itemGoods.$orig.size.name}}</text><text class="lan data-v-03b2db34">{{"¥"+itemGoods.$orig.retail_price+''}}<block wx:if="{{itemGoods.$orig.discount!=1}}"><text class="underline data-v-03b2db34">{{"¥"+item.$orig.goodsOf.retail_price}}</text></block><block wx:if="{{itemGoods.$orig.discount!=1}}"><text class="data-v-03b2db34">{{"(会员折扣"+itemGoods.$orig.discount*10+"折)"}}</text></block></text></view></view><view class="goods-right data-v-03b2db34">{{'x'+itemGoods.$orig.quantity+''}}</view></view></block></view></block></view></block><view class="add-goods data-v-03b2db34"><view data-event-opts="{{[['tap',[['toResale',['$event']]]]]}}" class="add-left data-v-03b2db34" bindtap="__e"><u-icon vue-id="72a78940-6" name="plus-circle-fill" color="#2979ff" size="30" class="data-v-03b2db34" bind:__l="__l"></u-icon><text class="data-v-03b2db34">增加商品</text></view><view class="add-right data-v-03b2db34"><text class="data-v-03b2db34">{{"共"+sum_number+"件商品"}}</text><text class="data-v-03b2db34">{{"合计¥"+sum_money}}</text></view></view></view><view class="box data-v-03b2db34"><view data-event-opts="{{[['tap',[['e0',['$event']]]]]}}" class="item-li data-v-03b2db34" bindtap="__e"><view class="box-left data-v-03b2db34"><text class="data-v-03b2db34">整单折扣</text></view><view class="box-right data-v-03b2db34"><block wx:if="{{!discounts}}"><text class="lan data-v-03b2db34">启用</text></block><block wx:else><text class="lan data-v-03b2db34">{{$root.g0+'折'}}</text></block><u-icon vue-id="72a78940-7" name="arrow-right" color="#cccccc" size="30" class="data-v-03b2db34" bind:__l="__l"></u-icon></view></view><view class="item-li data-v-03b2db34"><view class="box-left data-v-03b2db34"><text class="data-v-03b2db34">优惠券</text></view><view class="box-right data-v-03b2db34"><text class="data-v-03b2db34">0</text><u-icon vue-id="72a78940-8" name="arrow-right" color="#cccccc" size="30" class="data-v-03b2db34" bind:__l="__l"></u-icon></view></view><view class="item-li data-v-03b2db34"><view class="box-left data-v-03b2db34"><text class="data-v-03b2db34">优惠金额</text><u-input vue-id="72a78940-9" clearable="{{false}}" height="50" placeholder="请输入优惠金额" type="number" value="{{form.discount_money}}" data-event-opts="{{[['^input',[['__set_model',['$0','discount_money','$event',[]],['form']],['inputValue']]]]}}" bind:input="__e" class="data-v-03b2db34" bind:__l="__l"></u-input></view><view class="box-right data-v-03b2db34"></view></view></view><view class="box data-v-03b2db34"><view data-event-opts="{{[['tap',[['toSelecSalesperson',['$event']]]]]}}" class="item-li data-v-03b2db34" bindtap="__e"><view class="box-left data-v-03b2db34"><text class="data-v-03b2db34">销售员</text></view><view class="box-right data-v-03b2db34"><text class="data-v-03b2db34">{{staff}}</text><u-icon vue-id="72a78940-10" name="arrow-right" color="#cccccc" size="30" class="data-v-03b2db34" bind:__l="__l"></u-icon></view></view><view data-event-opts="{{[['tap',[['hiddenTime',['$event']]]]]}}" class="item-li data-v-03b2db34" bindtap="__e"><view class="box-left data-v-03b2db34"><text class="data-v-03b2db34">销售日期</text></view><view class="box-right data-v-03b2db34"><text class="data-v-03b2db34">{{form.business_time}}</text><u-icon vue-id="72a78940-11" name="arrow-right" color="#cccccc" size="30" class="data-v-03b2db34" bind:__l="__l"></u-icon></view></view><u-picker vue-id="72a78940-12" mode="time" default-time="{{form.business_time}}" params="{{params}}" value="{{showtime}}" data-event-opts="{{[['^confirm',[['confirmTime']]],['^input',[['__set_model',['','showtime','$event',[]]]]]]}}" bind:confirm="__e" bind:input="__e" class="data-v-03b2db34" bind:__l="__l"></u-picker><view class="item-li data-v-03b2db34"><view class="box-left data-v-03b2db34"><text class="data-v-03b2db34">获得积分</text><u-input vue-id="72a78940-13" height="50" disabled="{{true}}" placeholder="{{placeholder}}" type="number" value="{{test}}" data-event-opts="{{[['^click',[['toIntegralList']]],['^input',[['__set_model',['','test','$event',[]]]]]]}}" bind:click="__e" bind:input="__e" class="data-v-03b2db34" bind:__l="__l"></u-input></view><view class="box-right data-v-03b2db34"><block wx:if="{{form.reward_point>0}}"><text class="lan data-v-03b2db34">{{form.reward_point}}</text></block><u-icon vue-id="72a78940-14" name="arrow-right" color="#cccccc" size="30" class="data-v-03b2db34" bind:__l="__l"></u-icon></view></view></view><view class="box data-v-03b2db34"><view class="item-li data-v-03b2db34"><view class="box-left data-v-03b2db34"><text class="data-v-03b2db34">备注</text><u-input bind:input="__e" vue-id="72a78940-15" clearable="{{false}}" height="50" placeholder="请输入备注" type="number" value="{{form.remarks}}" data-event-opts="{{[['^input',[['__set_model',['$0','remarks','$event',[]],['form']]]]]}}" class="data-v-03b2db34" bind:__l="__l"></u-input></view><view class="box-right data-v-03b2db34"></view></view><view class="radios data-v-03b2db34"><u-checkbox-group vue-id="72a78940-16" class="data-v-03b2db34" bind:__l="__l" vue-slots="{{['default']}}"><block wx:for="{{group}}" wx:for-item="item" wx:for-index="index" wx:key="index"><u-checkbox bind:input="__e" class="rod data-v-03b2db34" vue-id="{{('72a78940-17-'+index)+','+('72a78940-16')}}" name="{{item.name}}" value="{{item.checked}}" data-event-opts="{{[['^input',[['__set_model',['$0','checked','$event',[]],[[['group','',index]]]]]]]}}" bind:__l="__l" vue-slots="{{['default']}}">{{item.name}}</u-checkbox></block></u-checkbox-group></view></view><u-popup vue-id="72a78940-18" mode="bottom" z-index="99" height="600rpx" value="{{show}}" data-event-opts="{{[['^open',[['open']]],['^input',[['__set_model',['','show','$event',[]]]]]]}}" bind:open="__e" bind:input="__e" class="data-v-03b2db34" bind:__l="__l" vue-slots="{{['default']}}"><view class="content data-v-03b2db34"><view class="fot data-v-03b2db34"><view data-event-opts="{{[['tap',[['edt',['$event']]]]]}}" class="edt data-v-03b2db34" bindtap="__e"><block wx:if="{{!set_del}}"><text class="data-v-03b2db34">编辑</text></block><block wx:else><text class="data-v-03b2db34">完成</text></block></view><view class="title data-v-03b2db34">整单折扣</view><view data-event-opts="{{[['tap',[['abolish',['$event']]]]]}}" class="qx data-v-03b2db34" bindtap="__e">取消</view></view><scroll-view style="height:440rpx;" scroll-y="true" class="data-v-03b2db34"><view class="bods data-v-03b2db34"><block wx:for="{{$root.l2}}" wx:for-item="item" wx:for-index="index" wx:key="index"><view data-event-opts="{{[['tap',[['itemClick',['$0',index],[[['discount_list','',index]]]]]]]}}" class="{{['hezi data-v-03b2db34',active==index?'active':'']}}" bindtap="__e">{{''+item.g1+'折'}}<block wx:if="{{set_del}}"><view data-event-opts="{{[['tap',[['discountedDel',['$0',index],[[['discount_list','',index]]]]]]]}}" class="red-del data-v-03b2db34" bindtap="__e"><u-icon vue-id="{{('72a78940-19-'+index)+','+('72a78940-18')}}" name="close-circle-fill" color="red" size="40" class="data-v-03b2db34" bind:__l="__l"></u-icon></view></block></view></block><view data-event-opts="{{[['tap',[['addDiscount',['$event']]]]]}}" class="hezi data-v-03b2db34" bindtap="__e">+增加</view></view></scroll-view><view class="confrim-btn data-v-03b2db34"><view data-event-opts="{{[['tap',[['notarize',['$event']]]]]}}" class="btn data-v-03b2db34" bindtap="__e">确认</view></view></view></u-popup></view><u-popup bind:input="__e" vue-id="72a78940-20" mode="center" border-radius="20" width="70%" height="340rpx" value="{{showed}}" data-event-opts="{{[['^input',[['__set_model',['','showed','$event',[]]]]]]}}" class="data-v-03b2db34" bind:__l="__l" vue-slots="{{['default']}}"><view class="discounted data-v-03b2db34"><view class="discounted-title data-v-03b2db34">输入折扣</view><view class="input data-v-03b2db34"><u-input bind:input="__e" vue-id="{{('72a78940-21')+','+('72a78940-20')}}" clearable="{{false}}" placeholder="9折即0.9,无折扣即1" input-align="center" type="number" border="{{true}}" value="{{value}}" data-event-opts="{{[['^input',[['__set_model',['','value','$event',[]]]]]]}}" class="data-v-03b2db34" bind:__l="__l"></u-input></view><view class="discounted-footer data-v-03b2db34"><view data-event-opts="{{[['tap',[['abrogate',['$event']]]]]}}" class="qx data-v-03b2db34" bindtap="__e">取消</view><view data-event-opts="{{[['tap',[['ensure',['$event']]]]]}}" class="qd data-v-03b2db34" bindtap="__e">确定</view></view></view></u-popup><u-popup bind:input="__e" vue-id="72a78940-22" mode="center" border-radius="20" width="70%" height="340rpx" value="{{show_edit}}" data-event-opts="{{[['^input',[['__set_model',['','show_edit','$event',[]]]]]]}}" class="data-v-03b2db34" bind:__l="__l" vue-slots="{{['default']}}"><view class="discounted data-v-03b2db34"><view class="discounted-title data-v-03b2db34">修改收款金额</view><view class="input data-v-03b2db34"><u-input bind:input="__e" vue-id="{{('72a78940-23')+','+('72a78940-22')}}" clearable="{{false}}" placeholder="请输入金额" input-align="center" type="number" border="{{true}}" value="{{money_edit}}" data-event-opts="{{[['^input',[['__set_model',['','money_edit','$event',[]]]]]]}}" class="data-v-03b2db34" bind:__l="__l"></u-input></view><view class="discounted-footer data-v-03b2db34"><view data-event-opts="{{[['tap',[['e1',['$event']]]]]}}" class="qx data-v-03b2db34" bindtap="__e">取消</view><view data-event-opts="{{[['tap',[['ensureEdit',['$event']]]]]}}" class="qd data-v-03b2db34" bindtap="__e">确定</view></view></view></u-popup><u-popup vue-id="72a78940-24" mode="bottom" z-index="99" height="440rpx" value="{{showPayment}}" data-event-opts="{{[['^open',[['open']]],['^input',[['__set_model',['','showPayment','$event',[]]]]]]}}" bind:open="__e" bind:input="__e" class="data-v-03b2db34" bind:__l="__l" vue-slots="{{['default']}}"><view class="content data-v-03b2db34"><view class="fot data-v-03b2db34"><view class="left-content data-v-03b2db34"><text class="data-v-03b2db34">收款：</text><text class="red data-v-03b2db34">{{"¥"+form.money}}</text></view><view data-event-opts="{{[['tap',[['combination',['$event']]]]]}}" class="right-content data-v-03b2db34" bindtap="__e">组合支付</view></view><scroll-view style="height:280rpx;" scroll-y="true" class="data-v-03b2db34"><view class="bods data-v-03b2db34"><block wx:for="{{paymentList}}" wx:for-item="item" wx:for-index="index" wx:key="index"><block class="data-v-03b2db34"><block wx:if="{{item.checked}}"><view data-event-opts="{{[['tap',[['paymentItem',['$0',index],[[['paymentList','',index]]]]]]]}}" class="pay data-v-03b2db34" bindtap="__e"><view class="pay-box data-v-03b2db34"><u-icon vue-id="{{('72a78940-25-'+index)+','+('72a78940-24')}}" name="rmb-circle" color="#aaaa7f" size="60" class="data-v-03b2db34" bind:__l="__l"></u-icon><text class="name data-v-03b2db34">{{item.name}}</text><block wx:if="{{activePay==index}}"><u-icon class="top-right data-v-03b2db34" vue-id="{{('72a78940-26-'+index)+','+('72a78940-24')}}" name="checkmark-circle-fill" color="#ff9a26" size="32" bind:__l="__l"></u-icon></block></view></view></block></block></block></view></scroll-view><view class="confrim-btn data-v-03b2db34"><view data-event-opts="{{[['tap',[['paySure',['$event']]]]]}}" class="btn data-v-03b2db34" bindtap="__e">确定</view></view></view></u-popup><u-popup bind:input="__e" vue-id="72a78940-27" mode="center" border-radius="20" width="70%" height="340rpx" value="{{show_psd}}" data-event-opts="{{[['^input',[['__set_model',['','show_psd','$event',[]]]]]]}}" class="data-v-03b2db34" bind:__l="__l" vue-slots="{{['default']}}"><view class="discounted data-v-03b2db34"><view class="discounted-title data-v-03b2db34">请输入会员密码</view><view class="input data-v-03b2db34"><u-input bind:input="__e" vue-id="{{('72a78940-28')+','+('72a78940-27')}}" clearable="{{false}}" placeholder="请输入六位数字密码" input-align="center" type="password" border="{{true}}" value="{{password}}" data-event-opts="{{[['^input',[['__set_model',['','password','$event',[]]]]]]}}" class="data-v-03b2db34" bind:__l="__l"></u-input></view><view class="discounted-footer data-v-03b2db34"><view data-event-opts="{{[['tap',[['abrogated',['$event']]]]]}}" class="qx data-v-03b2db34" bindtap="__e">取消</view><view data-event-opts="{{[['tap',[['ensured',['$event']]]]]}}" class="qd data-v-03b2db34" bindtap="__e">确定</view></view></view></u-popup><view class="footer data-v-03b2db34"><view class="footer-left data-v-03b2db34"><text class="data-v-03b2db34">收款</text><text class="lan-se data-v-03b2db34">{{"¥"+form.money}}</text><u-icon vue-id="72a78940-29" name="edit-pen-fill" color="#ff557f" size="40" data-event-opts="{{[['^click',[['showEditMoney']]]]}}" bind:click="__e" class="data-v-03b2db34" bind:__l="__l"></u-icon></view><view class="footer-right data-v-03b2db34"><view data-event-opts="{{[['tap',[['sure',[0]]]]]}}" class="hei data-v-03b2db34" bindtap="__e">挂单</view><view data-event-opts="{{[['tap',[['sure',[1]]]]]}}" class="lan data-v-03b2db34" bindtap="__e">收款</view></view></view><u-toast vue-id="72a78940-30" data-ref="uToast" class="data-v-03b2db34 vue-ref" bind:__l="__l"></u-toast></view>